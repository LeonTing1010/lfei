<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LFEI æ‹çˆ±ç–²æƒ«ä¸æƒ…æ„Ÿè€—ç«­æŒ‡æ•°æµ‹è¯„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* --- æ•´ä½“å¸ƒå±€ä¸ç¾åŒ– --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #d9534f; /* ç–²æƒ«ä¸»é¢˜è‰² */
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        h2 {
            color: #5bc0de; /* ç»´åº¦ä¸»é¢˜è‰² */
            margin-top: 25px;
            border-left: 5px solid #5bc0de;
            padding-left: 10px;
        }

        /* --- é¢˜ç›®æ ·å¼ --- */
        .question-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .question-group p {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .rating-options input[type="radio"] {
            margin-left: 15px;
        }
        .rating-options label {
            font-size: 0.9em;
            color: #666;
            margin-right: 5px;
        }
        
        /* --- æŒ‰é’®æ ·å¼ --- */
        #submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            background-color: #d9534f;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 30px;
            transition: background-color 0.3s;
        }
        #submit-btn:hover {
            background-color: #c9302c;
        }

        /* --- ç»“æœåŒºæ ·å¼ --- */
        #results {
            margin-top: 40px;
            padding: 20px;
            border-top: 2px dashed #ccc;
            display: none; /* åˆå§‹éšè— */
        }
        #results h3 {
            text-align: center;
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        #score-display {
            text-align: center;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        #level-display {
            text-align: center;
            font-size: 1.3em;
            padding: 10px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            margin-bottom: 20px;
        }
        #radar-chart {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>LFEI æ‹çˆ±ç–²æƒ«ä¸æƒ…æ„Ÿè€—ç«­æŒ‡æ•°æµ‹è¯„</h1>
    <p style="text-align: center; color: #888;">åŸºäºã€ç¤¾ä¼šäº¤æ¢ä¸æƒ…æ„ŸæŠ•å…¥ç†è®ºã€çš„å…³ç³»å¥åº·è¯Šæ–­å·¥å…·</p>
    
    <div id="quiz-form">
        <p style="text-align: center; margin-top: 20px; font-style: italic;">è¯·æ ¹æ®æ‚¨åœ¨è¿‡å»å››å‘¨å†…çš„çœŸå®æ„Ÿå—å’Œè¡Œä¸ºé€‰æ‹©ï¼ˆ1=ä»æœªå¦‚æ­¤ï¼Œ5=æ€»æ˜¯å¦‚æ­¤ï¼‰ï¼š</p>
        
        <h2>ğŸ’” ç»´åº¦ä¸€ï¼šæŠ•å…¥ä¸å¹³è¡¡åº¦ (A)</h2>
        <div class="question-group" id="q-a">
            </div>

        <h2>ğŸ—£ï¸ ç»´åº¦äºŒï¼šæ²Ÿé€šæ— æ•ˆè€—ç«­åº¦ (B)</h2>
        <div class="question-group" id="q-b">
            </div>
        
        <h2>ğŸ“‰ ç»´åº¦ä¸‰ï¼šå…³ç³»æ»¡æ„åº¦é€’å‡ç‡ (C)</h2>
        <div class="question-group" id="q-c">
            </div>

        <h2>ğŸ§­ ç»´åº¦å››ï¼šæœªæ¥è§„åˆ’æ— åŠ›æ„Ÿ (D)</h2>
        <div class="question-group" id="q-d">
            </div>

        <button id="submit-btn">ç«‹å³è®¡ç®—æˆ‘çš„ LFEI ç–²æƒ«æŒ‡æ•°</button>
    </div>

    <div id="results">
        <h3>æ‚¨çš„ LFEI æµ‹è¯„æŠ¥å‘Š</h3>
        <p>LFEI ç»¼åˆç–²æƒ«æŒ‡æ•°ï¼š</p>
        <div id="score-display">--%</div>
        
        <div id="level-display">--</div>

        
        <div id="interpretation">
            </div>


        <div id="radar-chart">
            <canvas id="lfeiRadarChart"></canvas>
        </div>
    </div>
</div>

<script>
// --- æ ¸å¿ƒæ•°æ®ä¸é€»è¾‘ ---

// 1. é¢˜åº“æ•°æ®
const QUESTIONS = [
    { id: 'A', dim: 'æŠ•å…¥ä¸å¹³è¡¡åº¦', questions: [
        "æˆ‘ä¸ºçº¦ä¼šã€æ—…è¡Œçš„ç­–åˆ’å’Œå‡†å¤‡å·¥ä½œèŠ±è´¹äº†å¤§éƒ¨åˆ†ç²¾åŠ›ã€‚",
        "ä¼´ä¾£åœ¨æ”¶åˆ°ç¤¼ç‰©æˆ–æƒŠå–œæ—¶ï¼Œæˆ‘çš„å¿ƒç†æœŸå¾…é€šå¸¸é«˜äºTaçš„å®é™…åé¦ˆã€‚",
        "æˆ‘ä¼šè‡ªå·±å¤„ç†å¤§éƒ¨åˆ†å®¶åº­äº‹åŠ¡æˆ–å…±åŒå¼€æ”¯ï¼Œå¾ˆå°‘ä¸»åŠ¨è¦æ±‚Taåˆ†æ‹…ã€‚",
        "å½“æˆ‘æ„Ÿåˆ°å‹åŠ›å¤§æ—¶ï¼Œæˆ‘é¦–å…ˆé€‰æ‹©è‡ªæˆ‘æ¶ˆåŒ–ï¼Œè€Œä¸æ˜¯å‘ä¼´ä¾£å¯»æ±‚å®‰æ…°ã€‚",
        "ä¼´ä¾£çš„ç¤¾äº¤æ—¥ç¨‹æˆ–å…´è¶£çˆ±å¥½ï¼Œå¾ˆå°‘ä¼šä¸ºäº†æˆ‘çš„éœ€æ±‚è€Œåšå‡ºè°ƒæ•´ã€‚"
    ]},
    { id: 'B', dim: 'æ²Ÿé€šæ— æ•ˆè€—ç«­åº¦', questions: [
        "æ¯æ¬¡æå‡ºå¯¹å…³ç³»çš„ä¸æ»¡ï¼Œæœ€åéƒ½ä¼šå˜æˆè®¨è®ºæˆ‘çš„â€œæƒ…ç»ªåŒ–â€æˆ–â€œå°é¢˜å¤§åšâ€ã€‚",
        "æ¯æ¬¡äº‰åµï¼Œæˆ‘ä»¬æœ€ç»ˆéƒ½å›åˆ°äº†èµ·ç‚¹ï¼Œé—®é¢˜ä»æœªçœŸæ­£è§£å†³ã€‚",
        "åœ¨æ²Ÿé€šè¿‡ç¨‹ä¸­ï¼Œæˆ‘å¸¸å¸¸æ„Ÿåˆ°ç²¾ç–²åŠ›å°½ï¼Œç”šè‡³æƒ³è¦æ”¾å¼ƒäº¤æµã€‚",
        "å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘å®æ„¿å‘é•¿ç¯‡æ–‡å­—ä¿¡æ¯ï¼Œä¹Ÿä¸æ„¿æ„ç›´æ¥å’Œä¼´ä¾£é¢å¯¹é¢äº¤æµã€‚",
        "å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘å®æ„¿ä¿æŒæ²‰é»˜ï¼Œä¹Ÿä¸æƒ³å¼€å£å»äº‰è®ºæˆ–è§£é‡Šã€‚"
    ]},
    { id: 'C', dim: 'å…³ç³»æ»¡æ„åº¦é€’å‡ç‡', questions: [
        "æˆ‘å‘ç°è‡ªå·±å¯¹ä¼´ä¾£èº«ä½“ä¸Šçš„äº²è¿‘ï¼Œä¸å¦‚ä»¥å‰é‚£ä¹ˆæ¸´æœ›å’ŒæœŸå¾…äº†ã€‚",
        "å’Œæœ‹å‹èšä¼šæˆ–ç‹¬å¤„æ—¶ï¼Œæˆ‘æ„Ÿå—åˆ°çš„è½»æ¾å’Œå¿«ä¹ï¼Œæ¯”å’Œä¼´ä¾£åœ¨ä¸€èµ·æ—¶æ›´å¤šã€‚",
        "æˆ‘ç»å¸¸æƒ³èµ·å‰ä»»æˆ–å•èº«æ—¶çš„å¥½å¤„ï¼Œå¹¶å°†è¿™äº›å¯¹æ¯”åˆ°ç°æœ‰å…³ç³»ä¸­ã€‚",
        "æˆ‘å¯¹ä¼´ä¾£æ—¥å¸¸ä¹ æƒ¯ä¸Šçš„å°ç¼ºç‚¹ï¼Œè¶Šæ¥è¶Šéš¾ä»¥å¿å—ã€‚",
        "æˆ‘å¾ˆå°‘ä¸»åŠ¨æˆ–è®¤çœŸæ€è€ƒæˆ‘ä»¬ä¸‹ä¸€æ¬¡çš„çº¦ä¼šæˆ–å‡æœŸè®¡åˆ’ã€‚"
    ]},
    { id: 'D', dim: 'æœªæ¥è§„åˆ’æ— åŠ›æ„Ÿ', questions: [
        "æƒ³åˆ°åå¹´åå’Œä¼´ä¾£çš„å…±åŒç”Ÿæ´»ï¼Œæˆ‘æ„Ÿåˆ°æ›´å¤šçš„æ˜¯è´Ÿæ‹…ï¼Œè€Œä¸æ˜¯æœŸå¾…ã€‚",
        "æˆ‘æ›´å€¾å‘äºå°†å¤§éƒ¨åˆ†å‚¨è“„å’Œæ—¶é—´æŠ•å…¥åˆ°ä¸ªäººæˆé•¿ä¸Šï¼Œè€Œä¸æ˜¯å…±åŒè§„åˆ’ã€‚",
        "å¦‚æœå…³ç³»å‡ºç°å·¨å¤§å±æœºï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯æ‰¾å¯»åè·¯ï¼Œè€Œä¸æ˜¯æåŠ›æŒ½æ•‘ã€‚",
        "æˆ‘ä¼šé¿å…åœ¨ä¼´ä¾£é¢å‰æåŠâ€œæˆ‘ä»¬çš„æœªæ¥â€ï¼Œå› ä¸ºè¿™è®©äººæ„Ÿåˆ°å‹åŠ›ã€‚",
        "å³ä½¿å¯¹è¿™æ®µå…³ç³»ä¸æ»¡æ„ï¼Œæˆ‘ä¸»è¦å› ä¸ºå®³æ€•å­¤ç‹¬æˆ–æ”¹å˜è€Œé€‰æ‹©ç•™ä¸‹ã€‚"
    ]}
];

// 2. è¯„åˆ†ç­‰çº§
const LEVELS = [
    { max: 40, name: 'ç»¿è‰²å®‰å…¨æœŸ (å¾®é£æ‹‚é¢)', color: '#5cb85c', advice: 'å…³ç³»çŠ¶æ€è‰¯å¥½ï¼Œç»§ç»­ä¿æŒé«˜è´¨é‡æ²Ÿé€šå’Œå®šæœŸç»´æŠ¤ã€‚' },
    { max: 60, name: 'é»„è‰²é¢„è­¦æœŸ (è½»åº¦å†…è€—)', color: '#f0ad4e', advice: 'è­¦æƒ•ï¼å…³ç³»è¿›å…¥å€¦æ€ æœŸï¼Œéœ€æ³¨å…¥æ–°çš„æ´»åŠ›ã€‚å»ºè®®å…³æ³¨æ²Ÿé€šå’Œæƒ…æ„Ÿç»´æŠ¤ã€‚' },
    { max: 80, name: 'æ©™è‰²é£é™©æœŸ (é«˜åº¦å¿ƒç´¯)', color: '#f0ad4e', advice: 'å±é™©ï¼æƒ…æ„ŸæŠ•å…¥ä¸¥é‡å¤±è¡¡ï¼Œè‹¥ä¸åŠæ—¶å¹²é¢„ï¼Œå¯èƒ½çˆ†å‘å±æœºã€‚è€ƒè™‘ä¸“ä¸šè¯¾ç¨‹æˆ–å’¨è¯¢ã€‚' },
    { max: 100, name: 'çº¢è‰²å´©æºƒæœŸ (çª’æ¯ä¸´ç•Œ)', color: '#d9534f', advice: 'æ€¥æ•‘ï¼å…³ç³»å¤„äºå´©æºƒè¾¹ç¼˜ï¼Œæ‚¨éœ€è¦ä¸“ä¸šçš„å¿ƒç†å¹²é¢„å’Œæ”¯æŒã€‚è¯·ç«‹å³å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚' }
];

// 3. å‡½æ•°ï¼šç”Ÿæˆé¢˜ç›® HTML
function renderQuestions() {
    QUESTIONS.forEach(dimData => {
        const container = document.getElementById(`q-${dimData.id.toLowerCase()}`);
        let html = '';
        dimData.questions.forEach((qText, index) => {
            const qNum = dimData.id + (index + 1);
            html += `
                <div style="margin-top: 10px;">
                    <p>ã€${qNum}ã€‘${qText}</p>
                    <div class="rating-options">
                        <label>1</label><input type="radio" name="q${qNum}" value="1" required>
                        <label>2</label><input type="radio" name="q${qNum}" value="2">
                        <label>3</label><input type="radio" name="q${qNum}" value="3">
                        <label>4</label><input type="radio" name="q${qNum}" value="4">
                        <label>5</label><input type="radio" name="q${qNum}" value="5">
                        <label>(5åˆ†)</label>
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
    });
}

// 4. å‡½æ•°ï¼šè®¡ç®—åˆ†æ•°
function calculateScore() {
    const form = document.getElementById('quiz-form');
    let totalScore = 0;
    const dimScores = { A: 0, B: 0, C: 0, D: 0 };
    let unanswered = false;

    QUESTIONS.forEach(dimData => {
        dimData.questions.forEach((qText, index) => {
            const qNum = dimData.id + (index + 1);
            const selector = `input[name="q${qNum}"]:checked`;
            const checked = document.querySelector(selector);
            
            if (!checked) {
                unanswered = true;
                return;
            }
            
            const score = parseInt(checked.value);
            totalScore += score;
            dimScores[dimData.id] += score;
        });
        if (unanswered) return;
    });

    if (unanswered) {
        alert('è¯·å®Œæˆæ‰€æœ‰ 20 é“é¢˜ç›®å†æäº¤ï¼');
        return null;
    }

    // è®¡ç®— LFEI ç™¾åˆ†æ¯”: (æ€»åˆ† - æœ€å°åˆ†) / (æœ€å¤§åˆ† - æœ€å°åˆ†) * 100
    // æœ€å°åˆ†: 20 (20 * 1), æœ€å¤§åˆ†: 100 (20 * 5)
    const lfeiPercent = Math.round(((totalScore - 20) / 80) * 100);

    return { totalScore, lfeiPercent, dimScores };
}

// 5. å‡½æ•°ï¼šæ¸²æŸ“ç»“æœ
let radarChartInstance = null; // ç”¨äºå­˜å‚¨ Chart å®ä¾‹

function renderResults(scoreData) {
    const { totalScore, lfeiPercent, dimScores } = scoreData;
    const resultsDiv = document.getElementById('results');
    const scoreDisplay = document.getElementById('score-display');
    const levelDisplay = document.getElementById('level-display');
    const interpretationDiv = document.getElementById('interpretation');

    // ç¡®å®šç–²æƒ«ç­‰çº§
    const level = LEVELS.find(l => totalScore <= l.max);

    // æ¸²æŸ“æ€»åˆ†å’Œç­‰çº§
    scoreDisplay.textContent = `${lfeiPercent}%`;
    levelDisplay.textContent = level.name;
    levelDisplay.style.backgroundColor = level.color;
    levelDisplay.style.color = (totalScore <= 40) ? '#333' : 'white'; // ç»¿è‰²å®‰å…¨æœŸå­—ä½“ç”¨æ·±è‰²
    
    // æ¸²æŸ“è¯¦ç»†è§£è¯»å’Œå»ºè®®
    interpretationDiv.innerHTML = `
        <p style="margin-top: 15px; font-size: 1.1em;"><strong>æ ¸å¿ƒå»ºè®®ï¼š</strong>${level.advice}</p>
        <p style="margin-top: 10px;">æ‚¨çš„æ€»åˆ†ä¸º ${totalScore} åˆ†ã€‚æ‚¨çš„ç–²æƒ«åº¦åˆ†å¸ƒå¦‚ä¸‹ï¼ˆé›·è¾¾å›¾ï¼‰ï¼š</p>
    `;

    // å‡†å¤‡é›·è¾¾å›¾æ•°æ® (å°†ç»´åº¦å¾—åˆ†è½¬æ¢ä¸º 1-5 å¹³å‡åˆ†)
    const dimAverages = [
        dimScores.A / 5, 
        dimScores.B / 5, 
        dimScores.C / 5, 
        dimScores.D / 5
    ];

    // ç»˜åˆ¶é›·è¾¾å›¾
    if (radarChartInstance) {
        radarChartInstance.destroy(); // é”€æ¯æ—§å›¾
    }

    const ctx = document.getElementById('lfeiRadarChart').getContext('2d');
    radarChartInstance = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['æŠ•å…¥ä¸å¹³è¡¡åº¦ (A)', 'æ²Ÿé€šæ— æ•ˆè€—ç«­åº¦ (B)', 'æ»¡æ„åº¦é€’å‡ç‡ (C)', 'æœªæ¥è§„åˆ’æ— åŠ›æ„Ÿ (D)'],
            datasets: [{
                label: 'æ‚¨çš„ç–²æƒ«å¹³å‡åˆ† (æ»¡åˆ†5)',
                data: dimAverages,
                backgroundColor: 'rgba(217, 83, 79, 0.4)', // çº¢è‰²åŠé€æ˜
                borderColor: '#d9534f',
                borderWidth: 2,
                pointBackgroundColor: '#d9534f',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: '#d9534f'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            scales: {
                r: {
                    angleLines: { display: true },
                    suggestedMin: 1, // æœ€å°åˆ»åº¦1
                    suggestedMax: 5, // æœ€å¤§åˆ»åº¦5
                    pointLabels: {
                        font: { size: 12 }
                    },
                    ticks: {
                        stepSize: 1,
                        display: true // æ˜¾ç¤ºåˆ»åº¦å€¼
                    }
                }
            },
            plugins: {
                legend: { display: false },
                title: { display: true, text: 'å››å¤§ç»´åº¦ç–²æƒ«åˆ†å¸ƒ' }
            }
        }
    });

    resultsDiv.style.display = 'block'; // æ˜¾ç¤ºç»“æœåŒº
    resultsDiv.scrollIntoView({ behavior: 'smooth' }); // æ»šåŠ¨åˆ°ç»“æœ
}

// 6. äº‹ä»¶ç›‘å¬å™¨
document.addEventListener('DOMContentLoaded', () => {
    renderQuestions(); // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆé¢˜ç›®

    document.getElementById('submit-btn').addEventListener('click', () => {
        const scoreData = calculateScore();
        if (scoreData) {
            renderResults(scoreData);
        }
    });
});
</script>

</body>
</html>
